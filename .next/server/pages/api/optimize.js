"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/optimize";
exports.ids = ["pages/api/optimize"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foptimize&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foptimize.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foptimize&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foptimize.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_optimize_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/optimize.js */ \"(api-node)/./pages/api/optimize.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_optimize_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_optimize_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_optimize_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_optimize_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/optimize\",\n        pathname: \"/api/optimize\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_optimize_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGb3B0aW1pemUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRm9wdGltaXplLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxtREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsbURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvb3B0aW1pemUuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29wdGltaXplXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb3B0aW1pemVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foptimize&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foptimize.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/optimize.js":
/*!*******************************!*\
  !*** ./pages/api/optimize.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @turf/turf */ \"@turf/turf\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_turf_turf__WEBPACK_IMPORTED_MODULE_0__]);\n_turf_turf__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Simulated annealing for QUBO (custom, no ml-sa)\nasync function simulatedAnnealingQUBO(Q, n, candidates, budget, maxIter = 10000, T0 = 20, alpha = 0.999) {\n    // Start with no grids\n    let x = Array(n).fill(0);\n    let bestX = x.slice(), bestE = Infinity;\n    let T = T0;\n    // Use the same costPenalty as in handler\n    const costPenalty = 10000 / budget;\n    function energy(x) {\n        let e = 0, cost = 0;\n        for(let i = 0; i < n; i++){\n            if (x[i]) cost += candidates[i].cost;\n            for(let j = 0; j < n; j++)e += Q[i][j] * x[i] * x[j];\n        }\n        if (cost > budget) e += costPenalty * (cost - budget) ** 2;\n        return e;\n    }\n    for(let iter = 0; iter < maxIter; iter++){\n        // Flip a random bit\n        let i = Math.floor(Math.random() * n);\n        let x2 = x.slice();\n        x2[i] = 1 - x2[i];\n        let e1 = energy(x), e2 = energy(x2);\n        if (e2 < e1 || Math.random() < Math.exp((e1 - e2) / T)) {\n            x = x2;\n            if (e2 < bestE) {\n                bestE = e2;\n                bestX = x.slice();\n            }\n        }\n        T *= alpha;\n        if (T < 1e-6) break;\n    }\n    return bestX;\n}\n// NAR (greedy) optimization: pick as many candidates as possible with best energy/cost ratio under budget\nfunction narGreedyBudget(Q, candidates, budget) {\n    // Sort by energy/cost ratio, pick until budget is reached\n    const idxs = candidates.map((c, i)=>i).sort((a, b)=>candidates[b].energy / candidates[b].cost - candidates[a].energy / candidates[a].cost);\n    let total = 0;\n    let selected = [];\n    for (let i of idxs){\n        if (total + candidates[i].cost <= budget) {\n            selected.push(i);\n            total += candidates[i].cost;\n        }\n    }\n    return candidates.map((_, i)=>selected.includes(i) ? 1 : 0);\n}\n// Gurobi QUBO solver (budget constraint)\nasync function gurobiQUBOBudget(Q, candidates, budget) {\n    try {\n        const { spawnSync } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! child_process */ \"child_process\", 23));\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n        const tmpDir = '/tmp';\n        const quboPath = path.join(tmpDir, `qubo_gurobi_${Date.now()}.json`);\n        const costsPath = path.join(tmpDir, `costs_gurobi_${Date.now()}.json`);\n        fs.writeFileSync(quboPath, JSON.stringify({\n            Q\n        }));\n        fs.writeFileSync(costsPath, JSON.stringify(candidates.map((c)=>c.cost)));\n        const pyPath = path.join(process.cwd(), 'gurobi_optimize.py');\n        const result = spawnSync('python3', [\n            pyPath,\n            '--qubo_file',\n            quboPath,\n            '--budget',\n            String(budget),\n            '--costs_file',\n            costsPath\n        ], {\n            encoding: 'utf-8'\n        });\n        fs.unlinkSync(quboPath);\n        fs.unlinkSync(costsPath);\n        if (result.status !== 0) throw new Error(result.stderr || 'Gurobi failed');\n        const out = result.stdout.trim().split('\\n').pop();\n        const parsed = JSON.parse(out);\n        const x = candidates.map((_, i)=>parsed.selected_indices.includes(i) ? 1 : 0);\n        return x;\n    } catch (e) {\n        throw new Error('Gurobi optimization failed: ' + e.message);\n    }\n}\n// Simulated annealing QUBO solver using Python simanneal\nasync function saPythonQUBO(Q, candidates, budget) {\n    const { spawnSync } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! child_process */ \"child_process\", 23));\n    const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n    const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n    const tmpDir = '/tmp';\n    const quboPath = path.join(tmpDir, `qubo_sa_${Date.now()}.json`);\n    const costsPath = path.join(tmpDir, `costs_sa_${Date.now()}.json`);\n    fs.writeFileSync(quboPath, JSON.stringify({\n        Q\n    }));\n    fs.writeFileSync(costsPath, JSON.stringify(candidates.map((c)=>c.cost)));\n    const pyPath = path.join(process.cwd(), 'sa_optimize.py');\n    const result = spawnSync('python3', [\n        pyPath,\n        '--qubo_file',\n        quboPath,\n        '--budget',\n        String(budget),\n        '--costs_file',\n        costsPath\n    ], {\n        encoding: 'utf-8'\n    });\n    fs.unlinkSync(quboPath);\n    fs.unlinkSync(costsPath);\n    if (result.status !== 0) throw new Error(result.stderr || 'Simulated annealing failed');\n    const out = result.stdout.trim().split('\\n').pop();\n    const parsed = JSON.parse(out);\n    const x = candidates.map((_, i)=>parsed.selected_indices.includes(i) ? 1 : 0);\n    return x;\n}\nasync function handler(req, res) {\n    const { polygon, budget, gridArea, cellSize, country, popCenter, quboOnly, algo } = req.body;\n    if (!polygon || polygon.length !== 4 || !budget || budget <= 0 || gridArea <= 0 || !cellSize || !country || !popCenter) {\n        return res.status(400).json({\n            error: 'Invalid input'\n        });\n    }\n    // Close the polygon\n    const coords = [\n        ...polygon.map((p)=>[\n                p.lng,\n                p.lat\n            ]),\n        [\n            polygon[0].lng,\n            polygon[0].lat\n        ]\n    ];\n    const turfPoly = (0,_turf_turf__WEBPACK_IMPORTED_MODULE_0__.polygon)([\n        coords\n    ]);\n    const totalArea = (0,_turf_turf__WEBPACK_IMPORTED_MODULE_0__.area)(turfPoly); // m^2\n    // Generate candidate grid centers (regular mesh inside polygon)\n    const nCandidates = Math.max(20, Math.floor(budget / cellSize.price) * 5);\n    let candidates = [];\n    const [minLng, minLat, maxLng, maxLat] = [\n        Math.min(...coords.map((c)=>c[0])),\n        Math.min(...coords.map((c)=>c[1])),\n        Math.max(...coords.map((c)=>c[0])),\n        Math.max(...coords.map((c)=>c[1]))\n    ];\n    const steps = Math.ceil(Math.sqrt(nCandidates));\n    for(let i = 0; i < steps; i++){\n        for(let j = 0; j < steps; j++){\n            const lat = minLat + (maxLat - minLat) * (i + 0.5) / steps;\n            const lng = minLng + (maxLng - minLng) * (j + 0.5) / steps;\n            if ((0,_turf_turf__WEBPACK_IMPORTED_MODULE_0__.booleanPointInPolygon)([\n                lng,\n                lat\n            ], turfPoly)) {\n                // Calculate distance to population center (in km)\n                const dist = (0,_turf_turf__WEBPACK_IMPORTED_MODULE_0__.distance)([\n                    lng,\n                    lat\n                ], [\n                    popCenter.lng,\n                    popCenter.lat\n                ], {\n                    units: 'kilometers'\n                });\n                candidates.push({\n                    lat,\n                    lng,\n                    cost: cellSize.price,\n                    energy: cellSize.energy,\n                    dist\n                });\n            }\n        }\n    }\n    if (candidates.length === 0) {\n        return res.status(200).json({\n            grids: []\n        });\n    }\n    // QUBO: minimize installation cost, maximize covered population, with penalties for budget, grid count, and minimum coverage\n    // Q(x) = sum_i C_i x_i - alpha * sum_i P_i x_i + theta (sum_i C_i x_i - B)^2 + mu (sum_i x_i - K)^2 + lambda (M - sum_i P_i x_i)^2\n    const alpha = 1; // trade-off weight for population coverage\n    const theta = 1000; // penalty for budget overflow\n    const mu = 1000; // penalty for grid count\n    const lambda = 1000; // penalty for minimum coverage\n    // User must provide K (max grids) and M (min population to cover) in request, else set defaults\n    const K = req.body.K ?? Math.floor(budget / cellSize.price); // default: max possible\n    const M = req.body.M ?? 0; // default: no minimum\n    // Extract C_i and P_i from candidates\n    const C = candidates.map((c)=>c.cost);\n    const P = candidates.map((c)=>c.pop ?? 1); // fallback: 1 if no pop field\n    // Precompute sums for QUBO\n    const n = candidates.length;\n    const Q = Array.from({\n        length: n\n    }, (_, i)=>Array(n).fill(0));\n    for(let i = 0; i < n; i++){\n        // Linear terms\n        Q[i][i] += C[i];\n        Q[i][i] += theta * C[i] ** 2;\n        Q[i][i] += mu;\n        Q[i][i] += lambda * P[i] ** 2;\n        Q[i][i] -= alpha * P[i];\n        Q[i][i] += -2 * theta * budget * C[i]; // fixed: B -> budget\n        Q[i][i] += -2 * mu * K;\n        Q[i][i] += -2 * lambda * M * P[i];\n    }\n    for(let i = 0; i < n; i++){\n        for(let j = 0; j < n; j++){\n            if (i === j) continue;\n            // Quadratic terms\n            Q[i][j] += 2 * theta * C[i] * C[j];\n            Q[i][j] += 2 * mu;\n            Q[i][j] += 2 * lambda * P[i] * P[j];\n        }\n    }\n    // Add constant terms to Q[0][0] (does not affect optimization, but for completeness)\n    Q[0][0] += theta * budget ** 2 + mu * K ** 2 + lambda * M ** 2;\n    // For quantum: return QUBO and candidates (limit size)\n    if (quboOnly) {\n        const maxCandidates = 1000;\n        if (candidates.length > maxCandidates) {\n            const step = Math.ceil(candidates.length / maxCandidates);\n            const reducedCandidates = candidates.filter((_, i)=>i % step === 0).slice(0, maxCandidates);\n            const reducedQ = reducedCandidates.map((_, i)=>reducedCandidates.map((_, j)=>Q[i * step]?.[j * step] ?? 0));\n            return res.status(200).json({\n                Q: reducedQ,\n                candidates: reducedCandidates,\n                budget\n            });\n        }\n        return res.status(200).json({\n            Q,\n            candidates,\n            budget\n        });\n    }\n    // Simulated annealing and greedy: maximize energy under budget\n    let x;\n    try {\n        if (algo === 'nar') {\n            x = narGreedyBudget(Q, candidates, budget);\n        } else if (algo === 'gurobi') {\n            x = await gurobiQUBOBudget(Q, candidates, budget);\n        } else {\n            x = await simulatedAnnealingQUBO(Q, candidates.length, candidates, budget);\n        }\n    } catch (e) {\n        console.error('Optimization error:', e);\n        return res.status(500).json({\n            error: e.message || e.toString()\n        });\n    }\n    const grids = candidates.filter((c, i)=>x[i]).map((c)=>({\n            lat: c.lat,\n            lng: c.lng,\n            cost: c.cost,\n            energy: c.energy,\n            dist: c.dist\n        }));\n    console.log('Returned grids:', grids.length);\n    res.status(200).json({\n        grids\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUWxDLEtBQUssQ0FBQyx1QkFBdUJyRTtRQUNyQyxPQUFPMkQsSUFBSWYsTUFBTSxDQUFDLEtBQUt3QixJQUFJLENBQUM7WUFBRUMsT0FBT3JFLEVBQUV1RCxPQUFPLElBQUl2RCxFQUFFd0csUUFBUTtRQUFHO0lBQ2pFO0lBQ0EsTUFBTWYsUUFBUXhHLFdBQVdvSCxNQUFNLENBQUMsQ0FBQ3RGLEdBQUdiLElBQU1aLENBQUMsQ0FBQ1ksRUFBRSxFQUFFWSxHQUFHLENBQUNDLENBQUFBLElBQU07WUFDeEQwRCxLQUFLMUQsRUFBRTBELEdBQUc7WUFDVkQsS0FBS3pELEVBQUV5RCxHQUFHO1lBQ1Z2RSxNQUFNYyxFQUFFZCxJQUFJO1lBQ1pGLFFBQVFnQixFQUFFaEIsTUFBTTtZQUNoQndGLE1BQU14RSxFQUFFd0UsSUFBSTtRQUNkO0lBQ0FnQixRQUFRRSxHQUFHLENBQUMsbUJBQW1CaEIsTUFBTXRCLE1BQU07SUFDM0NSLElBQUlmLE1BQU0sQ0FBQyxLQUFLd0IsSUFBSSxDQUFDO1FBQUVxQjtJQUFNO0FBQy9CIiwic291cmNlcyI6WyIvaG9tZS9haW1zYS9RRW5lcmd5L2NsYXNzaWNhbC9RRW5lcmd5L3BhZ2VzL2FwaS9vcHRpbWl6ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwb2x5Z29uIGFzIHR1cmZQb2x5Z29uLCBhcmVhIGFzIHR1cmZBcmVhLCBib29sZWFuUG9pbnRJblBvbHlnb24sIGRpc3RhbmNlIGFzIHR1cmZEaXN0YW5jZSB9IGZyb20gJ0B0dXJmL3R1cmYnO1xuXG4vLyBTaW11bGF0ZWQgYW5uZWFsaW5nIGZvciBRVUJPIChjdXN0b20sIG5vIG1sLXNhKVxuYXN5bmMgZnVuY3Rpb24gc2ltdWxhdGVkQW5uZWFsaW5nUVVCTyhRLCBuLCBjYW5kaWRhdGVzLCBidWRnZXQsIG1heEl0ZXIgPSAxMDAwMCwgVDAgPSAyMCwgYWxwaGEgPSAwLjk5OSkge1xuICAvLyBTdGFydCB3aXRoIG5vIGdyaWRzXG4gIGxldCB4ID0gQXJyYXkobikuZmlsbCgwKTtcbiAgbGV0IGJlc3RYID0geC5zbGljZSgpLCBiZXN0RSA9IEluZmluaXR5O1xuICBsZXQgVCA9IFQwO1xuICAvLyBVc2UgdGhlIHNhbWUgY29zdFBlbmFsdHkgYXMgaW4gaGFuZGxlclxuICBjb25zdCBjb3N0UGVuYWx0eSA9IDEwMDAwIC8gYnVkZ2V0O1xuICBmdW5jdGlvbiBlbmVyZ3koeCkge1xuICAgIGxldCBlID0gMCwgY29zdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmICh4W2ldKSBjb3N0ICs9IGNhbmRpZGF0ZXNbaV0uY29zdDtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSBlICs9IFFbaV1bal0gKiB4W2ldICogeFtqXTtcbiAgICB9XG4gICAgaWYgKGNvc3QgPiBidWRnZXQpIGUgKz0gY29zdFBlbmFsdHkgKiAoY29zdCAtIGJ1ZGdldCkgKiogMjtcbiAgICByZXR1cm4gZTtcbiAgfVxuICBmb3IgKGxldCBpdGVyID0gMDsgaXRlciA8IG1heEl0ZXI7IGl0ZXIrKykge1xuICAgIC8vIEZsaXAgYSByYW5kb20gYml0XG4gICAgbGV0IGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBuKTtcbiAgICBsZXQgeDIgPSB4LnNsaWNlKCk7IHgyW2ldID0gMSAtIHgyW2ldO1xuICAgIGxldCBlMSA9IGVuZXJneSh4KSwgZTIgPSBlbmVyZ3koeDIpO1xuICAgIGlmIChlMiA8IGUxIHx8IE1hdGgucmFuZG9tKCkgPCBNYXRoLmV4cCgoZTEgLSBlMikgLyBUKSkge1xuICAgICAgeCA9IHgyO1xuICAgICAgaWYgKGUyIDwgYmVzdEUpIHsgYmVzdEUgPSBlMjsgYmVzdFggPSB4LnNsaWNlKCk7IH1cbiAgICB9XG4gICAgVCAqPSBhbHBoYTtcbiAgICBpZiAoVCA8IDFlLTYpIGJyZWFrO1xuICB9XG4gIHJldHVybiBiZXN0WDtcbn1cblxuLy8gTkFSIChncmVlZHkpIG9wdGltaXphdGlvbjogcGljayBhcyBtYW55IGNhbmRpZGF0ZXMgYXMgcG9zc2libGUgd2l0aCBiZXN0IGVuZXJneS9jb3N0IHJhdGlvIHVuZGVyIGJ1ZGdldFxuZnVuY3Rpb24gbmFyR3JlZWR5QnVkZ2V0KFEsIGNhbmRpZGF0ZXMsIGJ1ZGdldCkge1xuICAvLyBTb3J0IGJ5IGVuZXJneS9jb3N0IHJhdGlvLCBwaWNrIHVudGlsIGJ1ZGdldCBpcyByZWFjaGVkXG4gIGNvbnN0IGlkeHMgPSBjYW5kaWRhdGVzLm1hcCgoYywgaSkgPT4gaSlcbiAgICAuc29ydCgoYSwgYikgPT4gKGNhbmRpZGF0ZXNbYl0uZW5lcmd5IC8gY2FuZGlkYXRlc1tiXS5jb3N0KSAtIChjYW5kaWRhdGVzW2FdLmVuZXJneSAvIGNhbmRpZGF0ZXNbYV0uY29zdCkpO1xuICBsZXQgdG90YWwgPSAwO1xuICBsZXQgc2VsZWN0ZWQgPSBbXTtcbiAgZm9yIChsZXQgaSBvZiBpZHhzKSB7XG4gICAgaWYgKHRvdGFsICsgY2FuZGlkYXRlc1tpXS5jb3N0IDw9IGJ1ZGdldCkge1xuICAgICAgc2VsZWN0ZWQucHVzaChpKTtcbiAgICAgIHRvdGFsICs9IGNhbmRpZGF0ZXNbaV0uY29zdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNhbmRpZGF0ZXMubWFwKChfLCBpKSA9PiBzZWxlY3RlZC5pbmNsdWRlcyhpKSA/IDEgOiAwKTtcbn1cblxuLy8gR3Vyb2JpIFFVQk8gc29sdmVyIChidWRnZXQgY29uc3RyYWludClcbmFzeW5jIGZ1bmN0aW9uIGd1cm9iaVFVQk9CdWRnZXQoUSwgY2FuZGlkYXRlcywgYnVkZ2V0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzcGF3blN5bmMgfSA9IGF3YWl0IGltcG9ydCgnY2hpbGRfcHJvY2VzcycpO1xuICAgIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0KCdmcycpO1xuICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoJ3BhdGgnKTtcbiAgICBjb25zdCB0bXBEaXIgPSAnL3RtcCc7XG4gICAgY29uc3QgcXVib1BhdGggPSBwYXRoLmpvaW4odG1wRGlyLCBgcXVib19ndXJvYmlfJHtEYXRlLm5vdygpfS5qc29uYCk7XG4gICAgY29uc3QgY29zdHNQYXRoID0gcGF0aC5qb2luKHRtcERpciwgYGNvc3RzX2d1cm9iaV8ke0RhdGUubm93KCl9Lmpzb25gKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHF1Ym9QYXRoLCBKU09OLnN0cmluZ2lmeSh7IFEgfSkpO1xuICAgIGZzLndyaXRlRmlsZVN5bmMoY29zdHNQYXRoLCBKU09OLnN0cmluZ2lmeShjYW5kaWRhdGVzLm1hcChjID0+IGMuY29zdCkpKTtcbiAgICBjb25zdCBweVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2d1cm9iaV9vcHRpbWl6ZS5weScpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHNwYXduU3luYygncHl0aG9uMycsIFtweVBhdGgsICctLXF1Ym9fZmlsZScsIHF1Ym9QYXRoLCAnLS1idWRnZXQnLCBTdHJpbmcoYnVkZ2V0KSwgJy0tY29zdHNfZmlsZScsIGNvc3RzUGF0aF0sIHsgZW5jb2Rpbmc6ICd1dGYtOCcgfSk7XG4gICAgZnMudW5saW5rU3luYyhxdWJvUGF0aCk7XG4gICAgZnMudW5saW5rU3luYyhjb3N0c1BhdGgpO1xuICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LnN0ZGVyciB8fCAnR3Vyb2JpIGZhaWxlZCcpO1xuICAgIGNvbnN0IG91dCA9IHJlc3VsdC5zdGRvdXQudHJpbSgpLnNwbGl0KCdcXG4nKS5wb3AoKTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG91dCk7XG4gICAgY29uc3QgeCA9IGNhbmRpZGF0ZXMubWFwKChfLCBpKSA9PiBwYXJzZWQuc2VsZWN0ZWRfaW5kaWNlcy5pbmNsdWRlcyhpKSA/IDEgOiAwKTtcbiAgICByZXR1cm4geDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignR3Vyb2JpIG9wdGltaXphdGlvbiBmYWlsZWQ6ICcgKyBlLm1lc3NhZ2UpO1xuICB9XG59XG5cbi8vIFNpbXVsYXRlZCBhbm5lYWxpbmcgUVVCTyBzb2x2ZXIgdXNpbmcgUHl0aG9uIHNpbWFubmVhbFxuYXN5bmMgZnVuY3Rpb24gc2FQeXRob25RVUJPKFEsIGNhbmRpZGF0ZXMsIGJ1ZGdldCkge1xuICBjb25zdCB7IHNwYXduU3luYyB9ID0gYXdhaXQgaW1wb3J0KCdjaGlsZF9wcm9jZXNzJyk7XG4gIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0KCdmcycpO1xuICBjb25zdCBwYXRoID0gYXdhaXQgaW1wb3J0KCdwYXRoJyk7XG4gIGNvbnN0IHRtcERpciA9ICcvdG1wJztcbiAgY29uc3QgcXVib1BhdGggPSBwYXRoLmpvaW4odG1wRGlyLCBgcXVib19zYV8ke0RhdGUubm93KCl9Lmpzb25gKTtcbiAgY29uc3QgY29zdHNQYXRoID0gcGF0aC5qb2luKHRtcERpciwgYGNvc3RzX3NhXyR7RGF0ZS5ub3coKX0uanNvbmApO1xuICBmcy53cml0ZUZpbGVTeW5jKHF1Ym9QYXRoLCBKU09OLnN0cmluZ2lmeSh7IFEgfSkpO1xuICBmcy53cml0ZUZpbGVTeW5jKGNvc3RzUGF0aCwgSlNPTi5zdHJpbmdpZnkoY2FuZGlkYXRlcy5tYXAoYyA9PiBjLmNvc3QpKSk7XG4gIGNvbnN0IHB5UGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc2Ffb3B0aW1pemUucHknKTtcbiAgY29uc3QgcmVzdWx0ID0gc3Bhd25TeW5jKCdweXRob24zJywgW3B5UGF0aCwgJy0tcXVib19maWxlJywgcXVib1BhdGgsICctLWJ1ZGdldCcsIFN0cmluZyhidWRnZXQpLCAnLS1jb3N0c19maWxlJywgY29zdHNQYXRoXSwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KTtcbiAgZnMudW5saW5rU3luYyhxdWJvUGF0aCk7XG4gIGZzLnVubGlua1N5bmMoY29zdHNQYXRoKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgIT09IDApIHRocm93IG5ldyBFcnJvcihyZXN1bHQuc3RkZXJyIHx8ICdTaW11bGF0ZWQgYW5uZWFsaW5nIGZhaWxlZCcpO1xuICBjb25zdCBvdXQgPSByZXN1bHQuc3Rkb3V0LnRyaW0oKS5zcGxpdCgnXFxuJykucG9wKCk7XG4gIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uob3V0KTtcbiAgY29uc3QgeCA9IGNhbmRpZGF0ZXMubWFwKChfLCBpKSA9PiBwYXJzZWQuc2VsZWN0ZWRfaW5kaWNlcy5pbmNsdWRlcyhpKSA/IDEgOiAwKTtcbiAgcmV0dXJuIHg7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgY29uc3QgeyBwb2x5Z29uLCBidWRnZXQsIGdyaWRBcmVhLCBjZWxsU2l6ZSwgY291bnRyeSwgcG9wQ2VudGVyLCBxdWJvT25seSwgYWxnbyB9ID0gcmVxLmJvZHk7XG5cbiAgaWYgKCFwb2x5Z29uIHx8IHBvbHlnb24ubGVuZ3RoICE9PSA0IHx8ICFidWRnZXQgfHwgYnVkZ2V0IDw9IDAgfHwgZ3JpZEFyZWEgPD0gMCB8fCAhY2VsbFNpemUgfHwgIWNvdW50cnkgfHwgIXBvcENlbnRlcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBpbnB1dCcgfSk7XG4gIH1cblxuICAvLyBDbG9zZSB0aGUgcG9seWdvblxuICBjb25zdCBjb29yZHMgPSBbLi4ucG9seWdvbi5tYXAocCA9PiBbcC5sbmcsIHAubGF0XSksIFtwb2x5Z29uWzBdLmxuZywgcG9seWdvblswXS5sYXRdXTtcbiAgY29uc3QgdHVyZlBvbHkgPSB0dXJmUG9seWdvbihbY29vcmRzXSk7XG4gIGNvbnN0IHRvdGFsQXJlYSA9IHR1cmZBcmVhKHR1cmZQb2x5KTsgLy8gbV4yXG5cbiAgLy8gR2VuZXJhdGUgY2FuZGlkYXRlIGdyaWQgY2VudGVycyAocmVndWxhciBtZXNoIGluc2lkZSBwb2x5Z29uKVxuICBjb25zdCBuQ2FuZGlkYXRlcyA9IE1hdGgubWF4KDIwLCBNYXRoLmZsb29yKGJ1ZGdldCAvIGNlbGxTaXplLnByaWNlKSAqIDUpO1xuICBsZXQgY2FuZGlkYXRlcyA9IFtdO1xuICBjb25zdCBbbWluTG5nLCBtaW5MYXQsIG1heExuZywgbWF4TGF0XSA9IFtcbiAgICBNYXRoLm1pbiguLi5jb29yZHMubWFwKGM9PmNbMF0pKSwgTWF0aC5taW4oLi4uY29vcmRzLm1hcChjPT5jWzFdKSksXG4gICAgTWF0aC5tYXgoLi4uY29vcmRzLm1hcChjPT5jWzBdKSksIE1hdGgubWF4KC4uLmNvb3Jkcy5tYXAoYz0+Y1sxXSkpXG4gIF07XG4gIGNvbnN0IHN0ZXBzID0gTWF0aC5jZWlsKE1hdGguc3FydChuQ2FuZGlkYXRlcykpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ZXBzOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN0ZXBzOyBqKyspIHtcbiAgICAgIGNvbnN0IGxhdCA9IG1pbkxhdCArIChtYXhMYXQgLSBtaW5MYXQpICogKGkgKyAwLjUpIC8gc3RlcHM7XG4gICAgICBjb25zdCBsbmcgPSBtaW5MbmcgKyAobWF4TG5nIC0gbWluTG5nKSAqIChqICsgMC41KSAvIHN0ZXBzO1xuICAgICAgaWYgKGJvb2xlYW5Qb2ludEluUG9seWdvbihbbG5nLCBsYXRdLCB0dXJmUG9seSkpIHtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGRpc3RhbmNlIHRvIHBvcHVsYXRpb24gY2VudGVyIChpbiBrbSlcbiAgICAgICAgY29uc3QgZGlzdCA9IHR1cmZEaXN0YW5jZShbbG5nLCBsYXRdLCBbcG9wQ2VudGVyLmxuZywgcG9wQ2VudGVyLmxhdF0sIHsgdW5pdHM6ICdraWxvbWV0ZXJzJyB9KTtcbiAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHsgbGF0LCBsbmcsIGNvc3Q6IGNlbGxTaXplLnByaWNlLCBlbmVyZ3k6IGNlbGxTaXplLmVuZXJneSwgZGlzdCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZ3JpZHM6IFtdIH0pO1xuICB9XG5cbiAgLy8gUVVCTzogbWluaW1pemUgaW5zdGFsbGF0aW9uIGNvc3QsIG1heGltaXplIGNvdmVyZWQgcG9wdWxhdGlvbiwgd2l0aCBwZW5hbHRpZXMgZm9yIGJ1ZGdldCwgZ3JpZCBjb3VudCwgYW5kIG1pbmltdW0gY292ZXJhZ2VcbiAgLy8gUSh4KSA9IHN1bV9pIENfaSB4X2kgLSBhbHBoYSAqIHN1bV9pIFBfaSB4X2kgKyB0aGV0YSAoc3VtX2kgQ19pIHhfaSAtIEIpXjIgKyBtdSAoc3VtX2kgeF9pIC0gSyleMiArIGxhbWJkYSAoTSAtIHN1bV9pIFBfaSB4X2kpXjJcbiAgY29uc3QgYWxwaGEgPSAxOyAgICAgIC8vIHRyYWRlLW9mZiB3ZWlnaHQgZm9yIHBvcHVsYXRpb24gY292ZXJhZ2VcbiAgY29uc3QgdGhldGEgPSAxMDAwOyAgIC8vIHBlbmFsdHkgZm9yIGJ1ZGdldCBvdmVyZmxvd1xuICBjb25zdCBtdSA9IDEwMDA7ICAgICAgLy8gcGVuYWx0eSBmb3IgZ3JpZCBjb3VudFxuICBjb25zdCBsYW1iZGEgPSAxMDAwOyAgLy8gcGVuYWx0eSBmb3IgbWluaW11bSBjb3ZlcmFnZVxuXG4gIC8vIFVzZXIgbXVzdCBwcm92aWRlIEsgKG1heCBncmlkcykgYW5kIE0gKG1pbiBwb3B1bGF0aW9uIHRvIGNvdmVyKSBpbiByZXF1ZXN0LCBlbHNlIHNldCBkZWZhdWx0c1xuICBjb25zdCBLID0gcmVxLmJvZHkuSyA/PyBNYXRoLmZsb29yKGJ1ZGdldCAvIGNlbGxTaXplLnByaWNlKTsgLy8gZGVmYXVsdDogbWF4IHBvc3NpYmxlXG4gIGNvbnN0IE0gPSByZXEuYm9keS5NID8/IDA7IC8vIGRlZmF1bHQ6IG5vIG1pbmltdW1cblxuICAvLyBFeHRyYWN0IENfaSBhbmQgUF9pIGZyb20gY2FuZGlkYXRlc1xuICBjb25zdCBDID0gY2FuZGlkYXRlcy5tYXAoYyA9PiBjLmNvc3QpO1xuICBjb25zdCBQID0gY2FuZGlkYXRlcy5tYXAoYyA9PiBjLnBvcCA/PyAxKTsgLy8gZmFsbGJhY2s6IDEgaWYgbm8gcG9wIGZpZWxkXG5cbiAgLy8gUHJlY29tcHV0ZSBzdW1zIGZvciBRVUJPXG4gIGNvbnN0IG4gPSBjYW5kaWRhdGVzLmxlbmd0aDtcbiAgY29uc3QgUSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG4gfSwgKF8sIGkpID0+IEFycmF5KG4pLmZpbGwoMCkpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIC8vIExpbmVhciB0ZXJtc1xuICAgIFFbaV1baV0gKz0gQ1tpXTtcbiAgICBRW2ldW2ldICs9IHRoZXRhICogKENbaV0gKiogMik7XG4gICAgUVtpXVtpXSArPSBtdTtcbiAgICBRW2ldW2ldICs9IGxhbWJkYSAqIChQW2ldICoqIDIpO1xuICAgIFFbaV1baV0gLT0gYWxwaGEgKiBQW2ldO1xuICAgIFFbaV1baV0gKz0gLTIgKiB0aGV0YSAqIGJ1ZGdldCAqIENbaV07IC8vIGZpeGVkOiBCIC0+IGJ1ZGdldFxuICAgIFFbaV1baV0gKz0gLTIgKiBtdSAqIEs7XG4gICAgUVtpXVtpXSArPSAtMiAqIGxhbWJkYSAqIE0gKiBQW2ldO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcbiAgICAgIGlmIChpID09PSBqKSBjb250aW51ZTtcbiAgICAgIC8vIFF1YWRyYXRpYyB0ZXJtc1xuICAgICAgUVtpXVtqXSArPSAyICogdGhldGEgKiBDW2ldICogQ1tqXTtcbiAgICAgIFFbaV1bal0gKz0gMiAqIG11O1xuICAgICAgUVtpXVtqXSArPSAyICogbGFtYmRhICogUFtpXSAqIFBbal07XG4gICAgfVxuICB9XG4gIC8vIEFkZCBjb25zdGFudCB0ZXJtcyB0byBRWzBdWzBdIChkb2VzIG5vdCBhZmZlY3Qgb3B0aW1pemF0aW9uLCBidXQgZm9yIGNvbXBsZXRlbmVzcylcbiAgUVswXVswXSArPSB0aGV0YSAqIChidWRnZXQgKiogMikgKyBtdSAqIChLICoqIDIpICsgbGFtYmRhICogKE0gKiogMik7XG5cbiAgLy8gRm9yIHF1YW50dW06IHJldHVybiBRVUJPIGFuZCBjYW5kaWRhdGVzIChsaW1pdCBzaXplKVxuICBpZiAocXVib09ubHkpIHtcbiAgICBjb25zdCBtYXhDYW5kaWRhdGVzID0gMTAwMDtcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPiBtYXhDYW5kaWRhdGVzKSB7XG4gICAgICBjb25zdCBzdGVwID0gTWF0aC5jZWlsKGNhbmRpZGF0ZXMubGVuZ3RoIC8gbWF4Q2FuZGlkYXRlcyk7XG4gICAgICBjb25zdCByZWR1Y2VkQ2FuZGlkYXRlcyA9IGNhbmRpZGF0ZXMuZmlsdGVyKChfLCBpKSA9PiBpICUgc3RlcCA9PT0gMCkuc2xpY2UoMCwgbWF4Q2FuZGlkYXRlcyk7XG4gICAgICBjb25zdCByZWR1Y2VkUSA9IHJlZHVjZWRDYW5kaWRhdGVzLm1hcCgoXywgaSkgPT4gcmVkdWNlZENhbmRpZGF0ZXMubWFwKChfLCBqKSA9PiBRW2kgKiBzdGVwXT8uW2ogKiBzdGVwXSA/PyAwKSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBROiByZWR1Y2VkUSwgY2FuZGlkYXRlczogcmVkdWNlZENhbmRpZGF0ZXMsIGJ1ZGdldCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgUSwgY2FuZGlkYXRlcywgYnVkZ2V0IH0pO1xuICB9XG5cbiAgLy8gU2ltdWxhdGVkIGFubmVhbGluZyBhbmQgZ3JlZWR5OiBtYXhpbWl6ZSBlbmVyZ3kgdW5kZXIgYnVkZ2V0XG4gIGxldCB4O1xuICB0cnkge1xuICAgIGlmIChhbGdvID09PSAnbmFyJykge1xuICAgICAgeCA9IG5hckdyZWVkeUJ1ZGdldChRLCBjYW5kaWRhdGVzLCBidWRnZXQpO1xuICAgIH0gZWxzZSBpZiAoYWxnbyA9PT0gJ2d1cm9iaScpIHtcbiAgICAgIHggPSBhd2FpdCBndXJvYmlRVUJPQnVkZ2V0KFEsIGNhbmRpZGF0ZXMsIGJ1ZGdldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHggPSBhd2FpdCBzaW11bGF0ZWRBbm5lYWxpbmdRVUJPKFEsIGNhbmRpZGF0ZXMubGVuZ3RoLCBjYW5kaWRhdGVzLCBidWRnZXQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09wdGltaXphdGlvbiBlcnJvcjonLCBlKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZS5tZXNzYWdlIHx8IGUudG9TdHJpbmcoKSB9KTtcbiAgfVxuICBjb25zdCBncmlkcyA9IGNhbmRpZGF0ZXMuZmlsdGVyKChjLCBpKSA9PiB4W2ldKS5tYXAoYyA9PiAoe1xuICAgIGxhdDogYy5sYXQsXG4gICAgbG5nOiBjLmxuZyxcbiAgICBjb3N0OiBjLmNvc3QsXG4gICAgZW5lcmd5OiBjLmVuZXJneSxcbiAgICBkaXN0OiBjLmRpc3RcbiAgfSkpO1xuICBjb25zb2xlLmxvZygnUmV0dXJuZWQgZ3JpZHM6JywgZ3JpZHMubGVuZ3RoKTtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBncmlkcyB9KTtcbn0iXSwibmFtZXMiOlsicG9seWdvbiIsInR1cmZQb2x5Z29uIiwiYXJlYSIsInR1cmZBcmVhIiwiYm9vbGVhblBvaW50SW5Qb2x5Z29uIiwiZGlzdGFuY2UiLCJ0dXJmRGlzdGFuY2UiLCJzaW11bGF0ZWRBbm5lYWxpbmdRVUJPIiwiUSIsIm4iLCJjYW5kaWRhdGVzIiwiYnVkZ2V0IiwibWF4SXRlciIsIlQwIiwiYWxwaGEiLCJ4IiwiQXJyYXkiLCJmaWxsIiwiYmVzdFgiLCJzbGljZSIsImJlc3RFIiwiSW5maW5pdHkiLCJUIiwiY29zdFBlbmFsdHkiLCJlbmVyZ3kiLCJlIiwiY29zdCIsImkiLCJqIiwiaXRlciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIngyIiwiZTEiLCJlMiIsImV4cCIsIm5hckdyZWVkeUJ1ZGdldCIsImlkeHMiLCJtYXAiLCJjIiwic29ydCIsImEiLCJiIiwidG90YWwiLCJzZWxlY3RlZCIsInB1c2giLCJfIiwiaW5jbHVkZXMiLCJndXJvYmlRVUJPQnVkZ2V0Iiwic3Bhd25TeW5jIiwiZnMiLCJwYXRoIiwidG1wRGlyIiwicXVib1BhdGgiLCJqb2luIiwiRGF0ZSIsIm5vdyIsImNvc3RzUGF0aCIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5IiwicHlQYXRoIiwicHJvY2VzcyIsImN3ZCIsInJlc3VsdCIsIlN0cmluZyIsImVuY29kaW5nIiwidW5saW5rU3luYyIsInN0YXR1cyIsIkVycm9yIiwic3RkZXJyIiwib3V0Iiwic3Rkb3V0IiwidHJpbSIsInNwbGl0IiwicG9wIiwicGFyc2VkIiwicGFyc2UiLCJzZWxlY3RlZF9pbmRpY2VzIiwibWVzc2FnZSIsInNhUHl0aG9uUVVCTyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJncmlkQXJlYSIsImNlbGxTaXplIiwiY291bnRyeSIsInBvcENlbnRlciIsInF1Ym9Pbmx5IiwiYWxnbyIsImJvZHkiLCJsZW5ndGgiLCJqc29uIiwiZXJyb3IiLCJjb29yZHMiLCJwIiwibG5nIiwibGF0IiwidHVyZlBvbHkiLCJ0b3RhbEFyZWEiLCJuQ2FuZGlkYXRlcyIsIm1heCIsInByaWNlIiwibWluTG5nIiwibWluTGF0IiwibWF4TG5nIiwibWF4TGF0IiwibWluIiwic3RlcHMiLCJjZWlsIiwic3FydCIsImRpc3QiLCJ1bml0cyIsImdyaWRzIiwidGhldGEiLCJtdSIsImxhbWJkYSIsIksiLCJNIiwiQyIsIlAiLCJmcm9tIiwibWF4Q2FuZGlkYXRlcyIsInN0ZXAiLCJyZWR1Y2VkQ2FuZGlkYXRlcyIsImZpbHRlciIsInJlZHVjZWRRIiwiY29uc29sZSIsInRvU3RyaW5nIiwibG9nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/optimize.js\n");

/***/ }),

/***/ "@turf/turf":
/*!*****************************!*\
  !*** external "@turf/turf" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("@turf/turf");;

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Foptimize&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Foptimize.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();